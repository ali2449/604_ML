<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Module 5: Supervised Machine Learning - Regression</title>

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- MathJax -->
  <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

  <style>
    /************************************************************
     * THEME: Aurora with Day/Night Mode (KEPT EXACTLY THE SAME)
     ************************************************************/
    :root {
      /* Night Mode (Default) */
      --bg0: #070A12;
      --bg1: #0B1020;
      --panel: #0F172A;
      --panel2: #0B1226;
      --card: #101B34;
      --text: #EAF0FF;
      --muted: rgba(234, 240, 255, 0.75);
      --muted2: rgba(234, 240, 255, 0.62);
      --border: rgba(148, 163, 184, 0.14);
      --shadow: 0 24px 60px rgba(0, 0, 0, 0.35);

      --primary: #60A5FA;
      --secondary: #A78BFA;
      --accent: #F472B6;
      --success: #34D399;
      --warning: #FBBF24;
      --danger: #FB7185;
      --cyan: #22D3EE;

      --radius: 16px;
      --radius2: 22px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

      --ring: 0 0 0 4px rgba(96, 165, 250, 0.22);
      --ring2: 0 0 0 4px rgba(167, 139, 250, 0.20);

      /* Theme toggle variables */
      --mode-icon: '\f186'; /* moon */
      --mode-label: 'Night Mode';
    }

    /* Day Mode Theme */
    [data-theme="day"] {
      --bg0: #F8FAFC;
      --bg1: #F1F5F9;
      --panel: #FFFFFF;
      --panel2: #F8FAFC;
      --card: #FFFFFF;
      --text: #0F172A;
      --muted: rgba(15, 23, 42, 0.75);
      --muted2: rgba(15, 23, 42, 0.62);
      --border: rgba(148, 163, 184, 0.25);
      --shadow: 0 20px 40px rgba(0, 0, 0, 0.08);

      --primary: #2563EB;
      --secondary: #7C3AED;
      --accent: #DB2777;
      --success: #10B981;
      --warning: #F59E0B;
      --danger: #EF4444;
      --cyan: #06B6D4;

      --ring: 0 0 0 4px rgba(37, 99, 235, 0.15);
      --ring2: 0 0 0 4px rgba(124, 58, 237, 0.15);

      --mode-icon: '\f185'; /* sun */
      --mode-label: 'Day Mode';
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }
    html { scroll-behavior: smooth; }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
      background: var(--bg0);
      color: var(--text);
      line-height: 1.7;
      min-height: 100vh;
      transition: background-color 0.35s ease, color 0.35s ease;
      overflow-x: hidden;
    }

    /* Dynamic background gradients */
    body:not([data-theme="day"]) {
      background:
        radial-gradient(1200px 520px at 15% 0%, rgba(96, 165, 250, 0.18), transparent 55%),
        radial-gradient(900px 520px at 90% 10%, rgba(244, 114, 182, 0.16), transparent 55%),
        radial-gradient(900px 520px at 75% 90%, rgba(34, 211, 238, 0.10), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
    }
    body[data-theme="day"] {
      background:
        radial-gradient(1200px 520px at 15% 0%, rgba(37, 99, 235, 0.08), transparent 55%),
        radial-gradient(900px 520px at 90% 10%, rgba(219, 39, 119, 0.08), transparent 55%),
        radial-gradient(900px 520px at 75% 90%, rgba(6, 182, 212, 0.06), transparent 55%),
        linear-gradient(180deg, var(--bg0), var(--bg1));
    }

    .container { max-width: 1400px; margin: 0 auto; padding: 22px; }

    /************************************************************
     * THEME TOGGLE
     ************************************************************/
    .theme-toggle-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 1000;
    }
    .theme-toggle {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 18px;
      border-radius: 50px;
      background: var(--panel);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      cursor: pointer;
      font-weight: 600;
      color: var(--text);
      backdrop-filter: blur(10px);
      transition: transform 0.2s ease, box-shadow 0.2s ease;
      border: none;
      font-family: inherit;
    }
    .theme-toggle:hover { transform: translateY(-2px); box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15); }
    .theme-toggle::before {
      content: var(--mode-icon);
      font-family: 'Font Awesome 6 Free';
      font-weight: 900;
      font-size: 1.1em;
    }
    .theme-toggle .label { font-size: 0.9em; opacity: 0.9; white-space: nowrap; }

    /************************************************************
     * HEADER
     ************************************************************/
    header {
      background: linear-gradient(135deg, rgba(15, 23, 42, 0.90), rgba(16, 27, 52, 0.92));
      border: 1px solid rgba(148, 163, 184, 0.18);
      color: var(--text);
      padding: 28px;
      border-radius: var(--radius2);
      box-shadow: var(--shadow);
      margin-bottom: 24px;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(10px);
    }
    body[data-theme="day"] header {
      background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(248, 250, 252, 0.98));
      border: 1px solid rgba(148, 163, 184, 0.25);
    }
    .course-info h1 {
      font-size: clamp(24px, 2.8vw, 38px);
      margin-bottom: 8px;
      letter-spacing: -0.5px;
      line-height: 1.2;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .course-info h2 {
      font-size: clamp(16px, 1.8vw, 20px);
      font-weight: 400;
      opacity: 0.9;
      margin-bottom: 12px;
      color: var(--muted);
    }
    .badge {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 18px;
      border-radius: 50px;
      font-weight: 700;
      letter-spacing: 0.2px;
      border: 1px solid var(--border);
      background: rgba(255, 255, 255, 0.08);
      width: fit-content;
      margin-top: 10px;
    }

    /************************************************************
     * NAVIGATION
     ************************************************************/
    .module-nav {
      display: flex;
      gap: 10px;
      margin: 20px 0;
      flex-wrap: wrap;
    }
    .nav-btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 12px 20px;
      border-radius: 50px;
      background: var(--panel);
      border: 1px solid var(--border);
      color: var(--text);
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      text-decoration: none;
      border: none;
      font-family: inherit;
      font-size: 14px;
    }
    .nav-btn:hover { transform: translateY(-2px); border-color: var(--primary); box-shadow: var(--ring); }
    .nav-btn.active { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; border: none; }

    /************************************************************
     * MAIN CONTENT
     ************************************************************/
    .module-content { display: none; }
    .module-content.active { display: block; animation: fadeIn 0.5s ease; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

    .panel {
      background: var(--panel);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      box-shadow: var(--shadow);
      overflow: hidden;
      margin-bottom: 24px;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .panel:hover { box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1); transform: translateY(-2px); }
    .section { padding: 24px; }
    .section h3 {
      color: var(--text);
      margin-bottom: 20px;
      font-size: 1.4rem;
      display: flex;
      align-items: center;
      gap: 12px;
      padding-bottom: 12px;
      border-bottom: 1px solid var(--border);
    }
    .section h4 {
      color: var(--text);
      margin: 20px 0 12px;
      font-size: 1.2rem;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .section p { margin-bottom: 15px; color: var(--muted); }

    /************************************************************
     * EXPANDED CONTENT STYLES (SIMPLIFIED FOR STUDENTS)
     ************************************************************/
    .expanded-content {
      margin: 20px 0;
      padding: 20px;
      background: var(--panel2);
      border-radius: var(--radius);
      border: 1px solid var(--border);
    }

    .numeric-example {
      font-family: var(--mono);
      background: rgba(15, 23, 42, 0.15);
      padding: 15px;
      border-radius: 8px;
      margin: 15px 0;
      border: 1px solid var(--border);
    }
    body[data-theme="day"] .numeric-example { background: rgba(15, 23, 42, 0.05); }
    .example-title {
      color: var(--accent);
      font-weight: 600;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .formula-with-calc {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin: 20px 0;
    }
    @media (max-width: 768px) { .formula-with-calc { grid-template-columns: 1fr; } }
    .formula-box {
      background: rgba(15, 23, 42, 0.1);
      border: 1px solid var(--border);
      border-radius: 12px;
      padding: 20px;
      margin: 16px 0;
      font-family: var(--mono);
      text-align: center;
      position: relative;
    }
    body[data-theme="day"] .formula-box { background: rgba(15, 23, 42, 0.05); }
    .formula-label {
      position: absolute;
      top: -10px;
      left: 20px;
      background: var(--panel);
      padding: 0 10px;
      font-size: 12px;
      color: var(--muted);
      font-weight: 600;
    }

    /************************************************************
     * STUDENT-FRIENDLY EXPLANATION BOXES (SIMPLIFIED LANGUAGE)
     ************************************************************/
    .explanation-box {
      background: linear-gradient(135deg, rgba(96, 165, 250, 0.05), rgba(167, 139, 250, 0.05));
      border-left: 4px solid var(--primary);
      padding: 20px;
      margin: 20px 0;
      border-radius: 0 var(--radius) var(--radius) 0;
      position: relative;
    }
    .explanation-box::before {
      content: 'üìö In Simple Terms';
      position: absolute;
      top: -10px;
      left: 20px;
      background: var(--panel);
      padding: 0 10px;
      font-size: 12px;
      font-weight: 600;
      color: var(--primary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }
    .explanation-box p:last-child { margin-bottom: 0; }

    .pro-tip {
      background: linear-gradient(135deg, rgba(52, 211, 153, 0.05), rgba(16, 185, 129, 0.05));
      border-left: 4px solid var(--success);
      padding: 20px;
      margin: 20px 0;
      border-radius: 0 var(--radius) var(--radius) 0;
      position: relative;
    }
    .pro-tip::before {
      content: 'üí° Study Tip';
      position: absolute;
      top: -10px;
      left: 20px;
      background: var(--panel);
      padding: 0 10px;
      font-size: 12px;
      font-weight: 600;
      color: var(--success);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .common-pitfall {
      background: linear-gradient(135deg, rgba(251, 113, 133, 0.05), rgba(239, 68, 68, 0.05));
      border-left: 4px solid var(--danger);
      padding: 20px;
      margin: 20px 0;
      border-radius: 0 var(--radius) var(--radius) 0;
      position: relative;
    }
    .common-pitfall::before {
      content: '‚ö†Ô∏è Watch Out!';
      position: absolute;
      top: -10px;
      left: 20px;
      background: var(--panel);
      padding: 0 10px;
      font-size: 12px;
      font-weight: 600;
      color: var(--danger);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    /************************************************************
     * REGRESSION VISUALIZATION
     ************************************************************/
    .regression-container {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 24px;
      margin: 20px 0;
    }
    @media (max-width: 1100px) { .regression-container { grid-template-columns: 1fr; } }
    .regression-chart {
      height: 400px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--panel2);
      position: relative;
      overflow: hidden;
    }
    .regression-controls {
      padding: 20px;
      background: var(--panel2);
      border-radius: var(--radius);
      border: 1px solid var(--border);
    }
    .control-group { margin-bottom: 24px; }
    .control-group h4 {
      color: var(--text);
      margin-bottom: 16px;
      font-size: 15px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .slider-container { display: flex; align-items: center; gap: 15px; margin-bottom: 15px; }
    .slider-container label { min-width: 160px; color: var(--muted); font-size: 14px; }
    input[type="range"] { flex: 1; height: 6px; border-radius: 3px; background: var(--border); outline: none; accent-color: var(--primary); }
    .slider-value { min-width: 50px; text-align: right; font-family: var(--mono); font-weight: 600; color: var(--text); }

    /************************************************************
     * ALGORITHM COMPARISON
     ************************************************************/
    .algorithm-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
      margin: 20px 0;
    }
    .algorithm-card {
      background: var(--panel2);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      overflow: hidden;
      transition: transform 0.2s ease;
    }
    .algorithm-card:hover { transform: translateY(-4px); border-color: var(--primary); }
    .algorithm-header {
      padding: 16px;
      background: linear-gradient(135deg, rgba(96, 165, 250, 0.1), rgba(167, 139, 250, 0.1));
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .algorithm-icon {
      width: 40px;
      height: 40px;
      border-radius: 10px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }
    .algorithm-title { flex: 1; }
    .algorithm-title h4 { margin: 0; font-size: 16px; color: var(--text); }
    .algorithm-title p { margin: 2px 0 0; font-size: 12px; color: var(--muted); }
    .algorithm-body { padding: 16px; }
    .algorithm-metric {
      display: flex;
      justify-content: space-between;
      margin-bottom: 8px;
      font-size: 13px;
      color: var(--muted);
    }
    .algorithm-metric span:last-child { font-weight: 600; color: var(--text); }
    .algorithm-progress { height: 4px; background: var(--border); border-radius: 2px; margin: 8px 0 16px; overflow: hidden; }
    .progress-bar { height: 100%; background: linear-gradient(90deg, var(--primary), var(--secondary)); border-radius: 2px; }

    /************************************************************
     * CODE EDITOR STYLES (WITH BETTER CODE COMMENTS)
     ************************************************************/
    .code-editor-container {
      margin: 20px 0;
      border-radius: var(--radius);
      overflow: hidden;
      border: 1px solid var(--border);
    }
    .code-header {
      background: var(--panel);
      padding: 12px 20px;
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .code-title { font-weight: 600; color: var(--text); display: flex; align-items: center; gap: 8px; }
    .code-actions { display: flex; gap: 8px; }
    .code-body { background: var(--panel2); padding: 0; overflow: auto; }
    .code-block { font-family: var(--mono); font-size: 14px; line-height: 1.6; padding: 20px; margin: 0; tab-size: 2; white-space: pre-wrap; min-height: 200px; }
    .code-block code { display: block; color: var(--text); }
    .keyword { color: var(--danger); }
    .function { color: var(--primary); }
    .string { color: var(--success); }
    .comment { color: var(--muted2); font-style: italic; }
    .number { color: var(--warning); }
    .operator { color: var(--cyan); }

    /************************************************************
     * METRICS DISPLAY
     ************************************************************/
    .metrics-container {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 15px;
      margin: 20px 0;
    }
    @media (max-width: 1100px) { .metrics-container { grid-template-columns: repeat(2, 1fr); } }
    @media (max-width: 600px) { .metrics-container { grid-template-columns: 1fr; } }
    .metric-card { padding: 20px; border-radius: var(--radius); border: 1px solid var(--border); background: var(--panel2); text-align: center; }
    .metric-value { font-size: 28px; font-weight: 700; margin: 10px 0; }
    .metric-label { font-size: 13px; color: var(--muted); text-transform: uppercase; letter-spacing: 0.5px; }
    .metric-good { color: var(--success); }
    .metric-warning { color: var(--warning); }
    .metric-danger { color: var(--danger); }

    /************************************************************
     * DETAILED TABLES
     ************************************************************/
    .detailed-table {
      width: 100%;
      border-collapse: separate;
      border-spacing: 0;
      overflow: hidden;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: var(--panel2);
      margin: 16px 0;
      font-size: 13px;
    }
    .detailed-table th, .detailed-table td {
      padding: 12px 16px;
      border-bottom: 1px solid var(--border);
      text-align: left;
    }
    .detailed-table th { background: var(--panel); color: var(--muted); font-weight: 600; }
    .detailed-table td { color: var(--text); font-family: var(--mono); }
    .detailed-table tr:last-child td { border-bottom: none; }
    .highlight-cell { background: rgba(96, 165, 250, 0.1); color: var(--primary); font-weight: 600; }

    /************************************************************
     * BUTTONS
     ************************************************************/
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 12px 20px;
      border-radius: 12px;
      font-weight: 600;
      border: none;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: inherit;
      font-size: 14px;
    }
    .btn-primary { background: linear-gradient(135deg, var(--primary), var(--secondary)); color: white; }
    .btn-secondary { background: var(--panel); color: var(--text); border: 1px solid var(--border); }
    .btn:hover:not(:disabled) { transform: translateY(-2px); box-shadow: var(--ring); }
    .btn:disabled { opacity: 0.5; cursor: not-allowed; transform: none !important; }
    .button-group { display: flex; gap: 10px; margin: 20px 0; flex-wrap: wrap; }

    /************************************************************
     * INFO BOXES
     ************************************************************/
    .info-box { padding: 20px; border-radius: 12px; border: 1px solid var(--border); margin: 20px 0; }
    .info-box.warning { border-left: 4px solid var(--warning); background: rgba(251, 191, 36, 0.08); }
    .info-box.success { border-left: 4px solid var(--success); background: rgba(52, 211, 153, 0.08); }
    .info-box.danger { border-left: 4px solid var(--danger); background: rgba(251, 113, 133, 0.08); }
    .info-box.info { border-left: 4px solid var(--primary); background: rgba(96, 165, 250, 0.08); }
    .info-box h4 { color: var(--text); margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }

    /************************************************************
     * CONCEPT CARDS
     ************************************************************/
    .concept-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 20px 0; }
    .concept-card {
      padding: 20px;
      border-radius: var(--radius);
      border: 1px solid var(--border);
      background: var(--panel2);
      transition: transform 0.2s ease;
    }
    .concept-card:hover { transform: translateY(-4px); border-color: var(--primary); }
    .concept-card h5 { color: var(--text); margin-bottom: 12px; font-size: 16px; display: flex; align-items: center; gap: 10px; }
    .concept-card p { color: var(--muted); font-size: 14px; line-height: 1.6; }

    /************************************************************
     * TIMELINE STYLES
     ************************************************************/
    .timeline { position: relative; max-width: 1200px; margin: 40px auto; }
    .timeline::after {
      content: '';
      position: absolute;
      width: 4px;
      background: linear-gradient(to bottom, var(--primary), var(--secondary));
      top: 0;
      bottom: 0;
      left: 50%;
      margin-left: -2px;
      border-radius: 2px;
    }
    @media (max-width: 768px) { .timeline::after { left: 31px; } }
    .timeline-item { padding: 10px 40px; position: relative; width: 50%; box-sizing: border-box; margin: 20px 0; }
    .timeline-item:nth-child(odd) { left: 0; }
    .timeline-item:nth-child(even) { left: 50%; }
    @media (max-width: 768px) {
      .timeline-item { width: 100%; padding-left: 70px; padding-right: 25px; }
      .timeline-item:nth-child(even) { left: 0; }
    }
    .timeline-content {
      padding: 20px;
      background: var(--panel2);
      border-radius: var(--radius);
      border: 1px solid var(--border);
      position: relative;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }
    .timeline-content:hover { transform: translateY(-3px); box-shadow: var(--shadow); border-color: var(--primary); }
    .timeline-item:nth-child(odd) .timeline-content::after,
    .timeline-item:nth-child(even) .timeline-content::after {
      content: '';
      position: absolute;
      width: 20px;
      height: 20px;
      background: var(--panel2);
      border: 2px solid var(--primary);
      top: 50%;
      transform: translateY(-50%) rotate(45deg);
      border-radius: 3px;
    }
    .timeline-item:nth-child(odd) .timeline-content::after { right: -10px; }
    .timeline-item:nth-child(even) .timeline-content::after { left: -10px; }
    @media (max-width: 768px) {
      .timeline-content::after { left: -10px !important; right: auto !important; }
    }
    .timeline-icon {
      position: absolute;
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      z-index: 1;
      top: 50%;
      transform: translateY(-50%);
      right: -20px;
    }
    .timeline-item:nth-child(even) .timeline-icon { left: -20px; right: auto; }
    @media (max-width: 768px) { .timeline-icon { left: 21px !important; right: auto !important; } }
    .timeline-date { font-weight: 600; color: var(--primary); margin-bottom: 8px; display: flex; align-items: center; gap: 8px; }
    .timeline-title { font-size: 1.1rem; margin-bottom: 10px; color: var(--text); }
    .timeline-description { color: var(--muted); font-size: 0.95rem; line-height: 1.6; }
    .tech-stack { display: flex; flex-wrap: wrap; gap: 8px; margin-top: 12px; }
    .tech-tag { padding: 4px 10px; background: rgba(96, 165, 250, 0.1); border-radius: 20px; font-size: 0.8rem; color: var(--primary); font-family: var(--mono); }

    /************************************************************
     * FOOTER
     ************************************************************/
    footer {
      text-align: center;
      margin-top: 32px;
      padding-top: 24px;
      border-top: 1px solid var(--border);
      color: var(--muted2);
      font-size: 14px;
      line-height: 1.6;
    }

    /************************************************************
     * UTILITY CLASSES
     ************************************************************/
    .highlight { background: rgba(96, 165, 250, 0.1); padding: 2px 6px; border-radius: 4px; color: var(--primary); font-weight: 600; }
    .mono { font-family: var(--mono); background: rgba(15, 23, 42, 0.1); padding: 2px 6px; border-radius: 4px; color: var(--text); }
    .math-equation { font-family: "Times New Roman", serif; font-style: italic; font-size: 1.1em; }

    .library-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin: 2px;
    }
    .sklearn-badge { background: rgba(231, 76, 60, 0.1); color: #E74C3C; border: 1px solid rgba(231, 76, 60, 0.3); }
    .xgb-badge { background: rgba(0, 102, 102, 0.1); color: #006666; border: 1px solid rgba(0, 102, 102, 0.3); }
    .rf-badge { background: rgba(39, 174, 96, 0.1); color: #27AE60; border: 1px solid rgba(39, 174, 96, 0.3); }
    .gb-badge { background: rgba(241, 196, 15, 0.1); color: #F1C40F; border: 1px solid rgba(241, 196, 15, 0.3); }

    a { color: var(--primary); }
    a:hover { opacity: 0.9; }
  </style>
</head>

<body data-theme="night">
  <!-- Theme Toggle -->
  <div class="theme-toggle-container">
    <button class="theme-toggle" id="themeToggle" type="button" aria-label="Theme: Night Mode (click to toggle)">
      <span class="label" id="themeLabel">Night Mode</span>
    </button>
  </div>

  <div class="container">
    <header>
      <div class="course-info">
        <h1>üìà Module 5: Supervised Machine Learning - Regression</h1>
        <h2>Supervised Machine Learning</h2>
        <div class="badge"><i class="fas fa-chart-line"></i> IAF 604: Learn how to predict house prices, sales, and more!</div>
        <p style="margin-top: 15px; color: var(--muted);">
          <strong>üéØ Your Learning Goals:</strong> By the end of this module, you'll understand how different regression algorithms work, 
          when to use each one, and how to tell if your predictions can be trusted.
        </p>
      </div>
    </header>

    <!-- Navigation - Same structure, clearer labels -->
    <div class="module-nav">
      <button class="nav-btn active" data-module="intro"><i class="fas fa-graduation-cap"></i> 1. What is Regression?</button>
      <button class="nav-btn" data-module="linear-models"><i class="fas fa-chart-line"></i> 2. Simple & Regularized Linear</button>
      <button class="nav-btn" data-module="tree-models"><i class="fas fa-tree"></i> 3. Decision Trees</button>
      <button class="nav-btn" data-module="ensemble"><i class="fas fa-layer-group"></i> 4. Random Forest & XGBoost</button>
      <button class="nav-btn" data-module="evaluation"><i class="fas fa-clipboard-check"></i> 5. How to Measure Success</button>
      <button class="nav-btn" data-module="hands-on"><i class="fas fa-laptop-code"></i> 6. Try It Yourself!</button>
      <button class="nav-btn" data-module="resources"><i class="fas fa-book"></i> 7. Practice Resources</button>
    </div>

    <!-- ================================================
         SECTION 1: INTRODUCTION - SIMPLIFIED FOR STUDENTS
    ================================================= -->
    <div id="intro" class="module-content active">

      <div class="panel section">
        <h3><i class="fas fa-graduation-cap"></i> 1.1 Supervised Learning: Learning with Examples</h3>

        <div class="info-box info">
          <h4><i class="fas fa-brain"></i> The Basic Idea</h4>
          <p>
            Imagine you're trying to teach a friend to estimate house prices. You'd show them examples:
            <span class="highlight">"This house has 3 bedrooms, 1500 sq ft, and sold for $300,000"</span>.
            After seeing enough examples, they'd learn to predict prices for new houses.
          </p>
          <p>
            <strong>That's supervised learning!</strong> The computer learns from labeled examples
            (features + correct answers) to make predictions on new data.
          </p>
        </div>

        <div class="explanation-box">
          <p><strong>üìö In Simple Terms:</strong> Think of it like studying for a test with an answer key. You practice on problems where you know the answers (training data), and then you take a test with new problems (test data). The goal is to do well on both!</p>
          <p><strong>Real-Life Example:</strong> Netflix uses supervised learning to predict which movies you'll like. They've seen what you watched before (features) and your ratings (target), so they can recommend new movies you haven't seen yet.</p>
        </div>

        <div class="expanded-content">
          <h4><i class="fas fa-sitemap"></i> Two Flavors of Supervised Learning</h4>

          <div class="concept-grid">
            <div class="concept-card">
              <h5><i class="fas fa-chart-line"></i> Regression ‚Üí Predicts Numbers</h5>
              <p><strong>Question it answers:</strong> "How much?" or "How many?"</p>
              <p><strong>Examples:</strong> 
                <ul style="padding-left:20px; color:var(--muted);">
                  <li>üè† House price: $425,000</li>
                  <li>üì¶ Tomorrow's sales: 1,250 units</li>
                  <li>üå°Ô∏è Temperature: 72.5¬∞F</li>
                  <li>‚è±Ô∏è Delivery time: 35 minutes</li>
                </ul>
              </p>
            </div>

            <div class="concept-card">
              <h5><i class="fas fa-tags"></i> Classification ‚Üí Predicts Categories</h5>
              <p><strong>Question it answers:</strong> "Which category?"</p>
              <p><strong>Examples:</strong>
                <ul style="padding-left:20px; color:var(--muted);">
                  <li>üìß Spam? Yes or No</li>
                  <li>üè• Disease? Diabetes or Healthy</li>
                  <li>üí≥ Fraud? Fraudulent or Legitimate</li>
                  <li>‚≠ê Rating: 1, 2, 3, 4, or 5 stars</li>
                </ul>
              </p>
            </div>
          </div>

          <div class="pro-tip">
            <p><strong>üí° Easy Rule:</strong> If your answer is a number (like price, age, temperature) ‚Üí use regression. If your answer is a category (like "spam" or "not spam") ‚Üí use classification. But sometimes we use regression to predict probabilities (like 75% chance of rain) and then turn that into a category!</p>
          </div>
        </div>

        <h4><i class="fas fa-table"></i> Let's Look at Real Data</h4>
        <p>
          Here's a tiny dataset of house sales. Notice how we have <span class="mono">features</span> (what we know about the house) 
          and a <span class="mono">target</span> (what we want to predict).
        </p>

        <table class="detailed-table">
          <thead>
            <tr>
              <th>üè† sqft (Feature)</th><th>üõèÔ∏è bedrooms (Feature)</th><th>üìÖ age (Feature)</th><th>üí∞ price (Target)</th>
            </tr>
          </thead>
          <tbody>
            <tr><td>1200</td><td>3</td><td>10</td><td class="highlight-cell">$250,000</td></tr>
            <tr><td>1800</td><td>4</td><td>5</td><td class="highlight-cell">$450,000</td></tr>
            <tr><td>950</td><td>2</td><td>20</td><td class="highlight-cell">$180,000</td></tr>
            <tr><td>1500</td><td>3</td><td>12</td><td class="highlight-cell">$320,000</td></tr>
          </tbody>
        </table>

        <div class="explanation-box">
          <p><strong>üîç What patterns do you see?</strong> Bigger houses (sqft) tend to cost more. Newer houses (lower age) seem pricier. But a 3-bedroom house can cost $250k or $320k depending on size and age. The computer's job is to learn these patterns automatically!</p>
        </div>
      </div>

      <div class="panel section">
        <h3><i class="fas fa-question-circle"></i> 1.2 What Exactly IS Regression?</h3>

        <div class="info-box info">
          <h4><i class="fas fa-lightbulb"></i> The Definition</h4>
          <p>
            <strong>Regression</strong> is when we predict a <span class="highlight">continuous number</span>.
            "Continuous" just means it can be any value within a range, not just whole numbers.
          </p>
        </div>

        <div class="formula-with-calc">
          <div class="formula-box">
            <div class="formula-label">The Math Version</div>
            <div style="text-align:left; padding: 15px;">
              <span class="math-equation">y = f(X) + Œµ</span><br/><br/>
              <strong>Translation:</strong><br/>
              ‚Ä¢ <strong>y</strong> = what we're predicting (price)<br/>
              ‚Ä¢ <strong>X</strong> = our input features (sqft, bedrooms)<br/>
              ‚Ä¢ <strong>f</strong> = the pattern the computer learns<br/>
              ‚Ä¢ <strong>Œµ</strong> = things we can't predict (random noise)
            </div>
          </div>

          <div class="numeric-example">
            <div class="example-title"><i class="fas fa-bullseye"></i> Why "Œµ" (Error) Always Exists</div>
            <p>
              Two identical houses (same sqft, bedrooms, age) might sell for different prices because:
              <ul style="margin-left:20px;">
                <li>One has a better school district (we didn't measure that)</li>
                <li>One was sold in summer vs winter (timing matters)</li>
                <li>The buyers just really loved the paint color (random!)</li>
              </ul>
              Good models capture the pattern (f(X)), but can't predict the randomness (Œµ).
            </p>
          </div>
        </div>

        <div class="common-pitfall">
          <p><strong>‚ö†Ô∏è The "Perfect Prediction" Myth:</strong> New students often expect their model to predict perfectly every time. But if your model gets 100% accuracy on real data, you've probably made a mistake! Real data always has some randomness (Œµ) that no model can predict. A good model gets close, not perfect.</p>
        </div>

        <div class="expanded-content">
          <h4><i class="fas fa-list-check"></i> Where is Regression Used in the Real World?</h4>
          <div class="concept-grid">
            <div class="concept-card">
              <h5>üè¢ Business</h5>
              <ul style="padding-left:20px;">
                <li>Forecasting next month's sales</li>
                <li>Predicting customer spending</li>
                <li>Estimating delivery times</li>
              </ul>
            </div>
            <div class="concept-card">
              <h5>üè• Healthcare</h5>
              <ul style="padding-left:20px;">
                <li>Predicting patient recovery time</li>
                <li>Estimating disease risk scores</li>
                <li>Calculating drug dosage</li>
              </ul>
            </div>
            <div class="concept-card">
              <h5>üåé Science</h5>
              <ul style="padding-left:20px;">
                <li>Forecasting temperature</li>
                <li>Predicting crop yields</li>
                <li>Estimating population growth</li>
              </ul>
            </div>
          </div>
        </div>
      </div>

      <div class="panel section">
        <h3><i class="fas fa-road"></i> 1.3 The 6-Step Recipe for Any Regression Project</h3>

        <div class="timeline">
          <div class="timeline-item">
            <div class="timeline-icon"><i class="fas fa-database"></i></div>
            <div class="timeline-content">
              <div class="timeline-date">Step 1: Get Your Data Ready</div>
              <div class="timeline-title">Clean, split, and prepare</div>
              <div class="timeline-description">
                Fix missing values, remove obvious errors, split into training (80%) and testing (20%).
                <strong>Never touch the test data until the end!</strong>
              </div>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-icon"><i class="fas fa-cogs"></i></div>
            <div class="timeline-content">
              <div class="timeline-date">Step 2: Pick Your Algorithm</div>
              <div class="timeline-title">Choose a method to try</div>
              <div class="timeline-description">
                Start simple (linear regression). If that's not good enough, try fancier methods (trees, forests).
              </div>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-icon"><i class="fas fa-chart-line"></i></div>
            <div class="timeline-content">
              <div class="timeline-date">Step 3: Train the Model</div>
              <div class="timeline-title">Let the computer learn patterns</div>
              <div class="timeline-description">
                The algorithm studies the training data and figures out the relationship between features and target.
              </div>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-icon"><i class="fas fa-clipboard-check"></i></div>
            <div class="timeline-content">
              <div class="timeline-date">Step 4: Evaluate Performance</div>
              <div class="timeline-title">How well did it learn?</div>
              <div class="timeline-description">
                Test the model on the untouched test data. Check if predictions are close to actual values.
              </div>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-icon"><i class="fas fa-sliders-h"></i></div>
            <div class="timeline-content">
              <div class="timeline-date">Step 5: Tune for Better Results</div>
              <div class="timeline-title">Adjust settings to improve</div>
              <div class="timeline-description">
                Most algorithms have "knobs" you can adjust (like tree depth). Try different settings to find what works best.
              </div>
            </div>
          </div>

          <div class="timeline-item">
            <div class="timeline-icon"><i class="fas fa-rocket"></i></div>
            <div class="timeline-content">
              <div class="timeline-date">Step 6: Deploy & Monitor</div>
              <div class="timeline-title">Use it in the real world</div>
              <div class="timeline-description">
                Put your model to work! But keep watching - if the world changes, your model might need updating.
              </div>
            </div>
          </div>
        </div>

        <div class="pro-tip">
          <p><strong>üí° The 80/20 Secret:</strong> In real projects, 80% of your time is spent on Step 1 (getting data ready) and only 20% on the fun modeling steps. Clean data is more important than fancy algorithms!</p>
        </div>
      </div>
    </div>

    <!-- ================================================
         SECTION 2: LINEAR MODELS - SIMPLIFIED
    ================================================= -->
    <div id="linear-models" class="module-content">

      <div class="panel section">
        <h3><i class="fas fa-chart-line"></i> 2.1 Linear Regression: Drawing a Straight Line Through Your Data</h3>

        <div class="info-box info">
          <h4><i class="fas fa-lightbulb"></i> The Core Idea</h4>
          <p>
            <strong>Linear regression</strong> assumes the relationship between features and target is a straight line.
            For one feature, it's just like the lines you drew in algebra class: <span class="math-equation">y = mx + b</span>
          </p>
          <p>
            <span class="mono">m</span> is the slope (how much y increases when x increases by 1), and 
            <span class="mono">b</span> is the intercept (the value when x=0).
          </p>
        </div>

        <div class="explanation-box">
          <p><strong>üìö In Simple Terms:</strong> Imagine you're looking at house sizes and prices. Linear regression tries to draw the straight line that comes closest to all your data points. It's like finding the best-fitting line through a scatter plot.</p>
          <p><strong>Real-Life Example:</strong> If you've ever used a ruler to draw a line through dots on graph paper, you've done the same thing linear regression does mathematically!</p>
        </div>

        <div class="expanded-content">
          <h4><i class="fas fa-check-circle"></i> When to Use Linear Regression</h4>
          <div class="concept-grid">
            <div class="concept-card">
              <h5>‚úÖ Great For</h5>
              <ul style="padding-left:20px;">
                <li>Simple relationships that look roughly like a line</li>
                <li>When you need to explain how features affect predictions</li>
                <li>As a baseline to compare fancier models against</li>
                <li>Small datasets (trains quickly)</li>
              </ul>
            </div>
            <div class="concept-card">
              <h5>‚ùå Not So Great For</h5>
              <ul style="padding-left:20px;">
                <li>Curved/U-shaped relationships</li>
                <li>When features interact in complex ways</li>
                <li>Data with extreme outliers</li>
                <li>Many highly correlated features</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="regression-container">
          <div class="regression-chart"><canvas id="linearChart"></canvas></div>

          <div class="regression-controls">
            <div class="control-group">
              <h4><i class="fas fa-sliders-h"></i> Play with the Demo</h4>
              <div class="slider-container">
                <label><i class="fas fa-random"></i> Noise Level:</label>
                <input type="range" id="noiseLevel" min="0" max="50" step="5" value="20">
                <span class="slider-value" id="noiseLevelValue">20</span>
              </div>
              <div class="slider-container">
                <label><i class="fas fa-chart-simple"></i> Sample Size:</label>
                <input type="range" id="sampleSize" min="20" max="200" step="10" value="100">
                <span class="slider-value" id="sampleSizeValue">100</span>
              </div>
            </div>

            <div class="button-group">
              <button class="btn btn-primary" onclick="generateLinearData()">
                <i class="fas fa-sync"></i> Generate New Random Data
              </button>
            </div>

            <div class="metrics-container" style="margin-top: 20px;">
              <div class="metric-card">
                <div class="metric-label">True Slope</div>
                <div class="metric-value" id="trueSlope">2.5</div>
                <div style="font-size:11px;">(hidden pattern)</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Found Slope</div>
                <div class="metric-value" id="estSlope">0.00</div>
                <div style="font-size:11px;">(model's estimate)</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">R¬≤ Score</div>
                <div class="metric-value" id="lrR2">0.00</div>
                <div style="font-size:11px;">0-1 scale, higher=better</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">MSE</div>
                <div class="metric-value" id="lrMSE">0.00</div>
                <div style="font-size:11px;">lower=better</div>
              </div>
            </div>

            <div class="explanation-box" style="margin-top: 20px;">
              <p><strong>üëÜ Try this:</strong></p>
              <ul style="padding-left:20px;">
                <li><strong>Increase Noise:</strong> See how the points scatter more? The red line becomes less accurate.</li>
                <li><strong>Increase Samples:</strong> More data helps the red line find the true pattern (slope 2.5).</li>
                <li><strong>Watch R¬≤:</strong> When noise is low, R¬≤ is high (close to 1). When noise is high, R¬≤ drops.</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="code-editor-container" style="margin-top: 20px;">
          <div class="code-header">
            <div class="code-title"><i class="fab fa-python"></i> Python Code: Linear Regression in 5 Lines</div>
            <div class="code-actions"><span class="library-badge sklearn-badge"><i class="fas fa-cube"></i> scikit-learn</span></div>
          </div>
          <div class="code-body">
            <pre class="code-block"><code><span class="comment"># 1. Import the tool</span>
<span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression

<span class="comment"># 2. Create the model</span>
model = LinearRegression()

<span class="comment"># 3. Train it on your data (X = features, y = target)</span>
model.<span class="function">fit</span>(X_train, y_train)

<span class="comment"># 4. Make predictions on new data</span>
predictions = model.<span class="function">predict</span>(X_test)

<span class="comment"># 5. See what it learned</span>
<span class="keyword">print</span>(<span class="string">f"Coefficients (slopes): {model.coef_}"</span>)
<span class="keyword">print</span>(<span class="string">f"Intercept: {model.intercept_:.2f}"</span>)</code></pre>
          </div>
        </div>

        <div class="pro-tip">
          <p><strong>üí° Reading the Output:</strong> If a coefficient is +200, that means: "Increasing this feature by 1 unit increases the prediction by 200." If it's negative, increasing that feature decreases the prediction. This makes linear regression easy to explain to non-technical people!</p>
        </div>
      </div>

      <div class="panel section">
        <h3><i class="fas fa-exclamation-triangle"></i> 2.2 The Problem: When Simple Lines Aren't Enough</h3>

        <div class="info-box warning">
          <h4><i class="fas fa-fire"></i> Why We Need Regularization</h4>
          <p>
            Imagine you have 50 features but only 100 houses. Regular linear regression will try to use all 50 features,
            often fitting to random noise instead of real patterns. This is called <strong>overfitting</strong>.
          </p>
        </div>

        <div class="expanded-content">
          <h4><i class="fas fa-compass"></i> Three Smart Solutions: Ridge, Lasso, and ElasticNet</h4>
          
          <div class="concept-grid">
            <div class="concept-card">
              <h5>üèîÔ∏è Ridge Regression</h5>
              <p><strong>How it works:</strong> Adds a penalty that keeps all features but shrinks their coefficients toward zero.</p>
              <p><strong>Analogy:</strong> Like telling a student "use all the information, but don't get too confident about any single detail."</p>
              <p><strong>Best for:</strong> When many features contribute a little bit to the prediction.</p>
            </div>
            <div class="concept-card">
              <h5>‚úÇÔ∏è Lasso Regression</h5>
              <p><strong>How it works:</strong> Can actually force some coefficients to become exactly zero - removing features entirely.</p>
              <p><strong>Analogy:</strong> Like an editor who cuts out irrelevant paragraphs entirely, not just shortening them.</p>
              <p><strong>Best for:</strong> When you suspect only a few features really matter.</p>
            </div>
            <div class="concept-card">
              <h5>‚öñÔ∏è ElasticNet</h5>
              <p><strong>How it works:</strong> A compromise between Ridge and Lasso.</p>
              <p><strong>Analogy:</strong> The balanced approach - keeps groups of related features together while still removing truly useless ones.</p>
              <p><strong>Best for:</strong> When you have correlated features and want some feature selection.</p>
            </div>
          </div>
        </div>

        <div class="common-pitfall">
          <p><strong>‚ö†Ô∏è The Alpha Trap:</strong> All three methods have an "alpha" knob that controls how much to penalize complexity. Too small alpha ‚Üí still overfitting. Too large alpha ‚Üí oversimplified model that misses patterns. Always try different alpha values and see what works best!</p>
        </div>

        <div class="code-editor-container" style="margin-top: 20px;">
          <div class="code-header">
            <div class="code-title"><i class="fab fa-python"></i> Ridge Regression Example</div>
          </div>
          <div class="code-body">
            <pre class="code-block"><code><span class="comment"># 1. Import</span>
<span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> Ridge
<span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler

<span class="comment"># 2. Important! Scale your data first (regularization needs this)</span>
scaler = StandardScaler()
X_scaled = scaler.<span class="function">fit_transform</span>(X_train)

<span class="comment"># 3. Create Ridge model with a specific alpha</span>
ridge = Ridge(<span class="function">alpha</span>=<span class="number">1.0</span>)  <span class="comment"># alpha=0 would be regular linear regression</span>

<span class="comment"># 4. Train and predict as usual</span>
ridge.<span class="function">fit</span>(X_scaled, y_train)
predictions = ridge.<span class="function">predict</span>(scaler.<span class="function">transform</span>(X_test))</code></pre>
          </div>
        </div>
      </div>
    </div>

    <!-- ================================================
         SECTION 3: TREE-BASED MODELS - SIMPLIFIED
    ================================================= -->
    <div id="tree-models" class="module-content">

      <div class="panel section">
        <h3><i class="fas fa-tree"></i> 3.1 Decision Trees: If-This-Then-That Rules</h3>

        <div class="info-box info">
          <h4><i class="fas fa-lightbulb"></i> How Decision Trees Work</h4>
          <p>
            Instead of drawing a line, decision trees ask a series of yes/no questions:
          </p>
          <div style="background:var(--panel); padding:15px; border-radius:8px; margin:15px 0;">
            <p><strong>Question 1:</strong> Is sqft > 1500?<br/>
            &nbsp;&nbsp;&nbsp;‚Üí If YES: Go to Question 2<br/>
            &nbsp;&nbsp;&nbsp;‚Üí If NO: Predict $250,000</p>
            <p><strong>Question 2:</strong> Is age < 10 years?<br/>
            &nbsp;&nbsp;&nbsp;‚Üí If YES: Predict $450,000<br/>
            &nbsp;&nbsp;&nbsp;‚Üí If NO: Predict $380,000</p>
          </div>
          <p>Each final answer (prediction) is just the average price of all training houses that followed that path.</p>
        </div>

        <div class="explanation-box">
          <p><strong>üìö In Simple Terms:</strong> A decision tree is like the game "20 Questions" - it keeps splitting the data into smaller groups based on feature values until each group is pure enough to make a prediction. The predictions are just the average of that group.</p>
          <p><strong>Real-Life Example:</strong> A bank loan officer might use rules like: "If income > $50k AND credit score > 700, approve up to $50k. If income > $50k but credit score ‚â§ 700, approve up to $30k." That's a decision tree!</p>
        </div>

        <div class="expanded-content">
          <h4><i class="fas fa-check-circle"></i> When to Use Decision Trees</h4>
          <div class="concept-grid">
            <div class="concept-card">
              <h5>‚úÖ Great For</h5>
              <ul style="padding-left:20px;">
                <li>Non-linear patterns (curves, thresholds)</li>
                <li>When you need to explain decisions to managers</li>
                <li>Mixed data types (numbers + categories)</li>
                <li>Automatically finding interactions between features</li>
              </ul>
            </div>
            <div class="concept-card">
              <h5>‚ö†Ô∏è Watch Out For</h5>
              <ul style="padding-left:20px;">
                <li><strong>Overfitting!</strong> Deep trees memorize training data</li>
                <li>Unstable - small data changes can create very different trees</li>
                <li>Can't predict beyond training range (no extrapolation)</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="regression-container">
          <div class="regression-chart"><canvas id="treeChart"></canvas></div>

          <div class="regression-controls">
            <div class="control-group">
              <h4><i class="fas fa-sliders-h"></i> Control the Tree's Complexity</h4>
              <div class="slider-container">
                <label><i class="fas fa-layer-group"></i> Tree Depth:</label>
                <input type="range" id="treeDepth" min="1" max="10" step="1" value="3">
                <span class="slider-value" id="treeDepthValue">3</span>
              </div>
              <p style="font-size:12px; margin-top:-5px;">Depth = number of questions in a row</p>
              
              <div class="slider-container">
                <label><i class="fas fa-users"></i> Min Samples per Leaf:</label>
                <input type="range" id="minSamples" min="2" max="20" step="1" value="5">
                <span class="slider-value" id="minSamplesValue">5</span>
              </div>
              <p style="font-size:12px; margin-top:-5px;">Higher = simpler, more robust tree</p>
            </div>

            <div class="button-group">
              <button class="btn btn-primary" onclick="updateTreeModel()"><i class="fas fa-play"></i> Update Tree</button>
              <button class="btn btn-secondary" onclick="resetTreeData()"><i class="fas fa-redo"></i> New Random Data</button>
            </div>

            <div class="metrics-container" style="margin-top: 20px;">
              <div class="metric-card">
                <div class="metric-label">Training R¬≤</div>
                <div class="metric-value" id="treeTrainR2">0.85</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Test R¬≤</div>
                <div class="metric-value" id="treeTestR2">0.78</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Leaves</div>
                <div class="metric-value" id="treeLeaves">8</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Depth</div>
                <div class="metric-value" id="treeCurrentDepth">3</div>
              </div>
            </div>

            <div class="explanation-box" style="margin-top: 20px;">
              <p><strong>üëÜ Watch what happens:</strong></p>
              <ul style="padding-left:20px;">
                <li><strong>Depth 1:</strong> Just a flat line (average of all data)</li>
                <li><strong>Depth 3-4:</strong> Starts capturing the curve</li>
                <li><strong>Depth 8-10:</strong> Wiggles through every point - test R¬≤ drops (overfitting!)</li>
              </ul>
              <p><strong>The goal:</strong> Find the depth where test R¬≤ is highest.</p>
            </div>
          </div>
        </div>

        <div class="code-editor-container" style="margin-top: 20px;">
          <div class="code-header">
            <div class="code-title"><i class="fab fa-python"></i> Decision Tree Code</div>
          </div>
          <div class="code-body">
            <pre class="code-block"><code><span class="keyword">from</span> sklearn.tree <span class="keyword">import</span> DecisionTreeRegressor

<span class="comment"># Create a tree with limits to prevent overfitting</span>
tree = DecisionTreeRegressor(
    <span class="function">max_depth</span>=<span class="number">5</span>,           <span class="comment"># Don't let it get too deep</span>
    <span class="function">min_samples_leaf</span>=<span class="number">10</span>,    <span class="comment"># Each leaf must have at least 10 houses</span>
    <span class="function">random_state</span>=<span class="number">42</span>
)

tree.<span class="function">fit</span>(X_train, y_train)

<span class="comment"># You can even see the tree rules!</span>
<span class="comment"># from sklearn.tree import plot_tree</span>
<span class="comment"># plot_tree(tree, feature_names=feature_names)</span></code></pre>
          </div>
        </div>

        <div class="pro-tip">
          <p><strong>üí° Student Tip:</strong> Decision trees are great for understanding your data. Plot the tree and follow the paths - you'll see exactly which features matter most and at what thresholds they split. It's like reading the mind of your model!</p>
        </div>
      </div>
    </div>

    <!-- ================================================
         SECTION 4: ENSEMBLE METHODS - SIMPLIFIED
    ================================================= -->
    <div id="ensemble" class="module-content">

      <div class="panel section">
        <h3><i class="fas fa-layer-group"></i> 4.1 Ensemble Methods: Why Many Models Are Better Than One</h3>

        <div class="info-box info">
          <h4><i class="fas fa-users"></i> The Wisdom of the Crowd</h4>
          <p>
            Imagine you need to guess the number of jellybeans in a jar. Would you rather trust:
          </p>
          <ul style="padding-left:20px; margin:15px 0;">
            <li><strong>One expert</strong> (might have a bad day)</li>
            <li><strong>The average guess of 100 random people</strong> (surprisingly accurate!)</li>
          </ul>
          <p>
            Ensembles work the same way - they combine many models to get a better answer than any single model could provide.
          </p>
        </div>

        <div class="explanation-box">
          <p><strong>üìö In Simple Terms:</strong> Each model makes mistakes, but they make different mistakes. When you average them, the mistakes cancel out and the correct signal remains. It's like getting a second opinion from multiple doctors.</p>
        </div>

        <div class="concept-grid">
          <div class="concept-card">
            <h5><i class="fas fa-random"></i> Bagging (Random Forest)</h5>
            <p><strong>Idea:</strong> Train many trees on random subsets of the data, then average their predictions.</p>
            <p><strong>Analogy:</strong> Ask 100 different people, each looking at different samples of houses.</p>
            <p><strong>Result:</strong> Much more stable than a single tree, less overfitting.</p>
          </div>
          <div class="concept-card">
            <h5><i class="fas fa-arrow-up"></i> Boosting (XGBoost)</h5>
            <p><strong>Idea:</strong> Train trees sequentially - each new tree focuses on fixing the mistakes of previous trees.</p>
            <p><strong>Analogy:</strong> A teacher who gives extra help on problems students got wrong, then retests.</p>
            <p><strong>Result:</strong> Often the most accurate, but can overfit if not careful.</p>
          </div>
        </div>
      </div>

      <div class="panel section">
        <h3><i class="fas fa-tree"></i> 4.2 Random Forest: A Forest of Decision Trees</h3>

        <div class="expanded-content">
          <h4>How Random Forest Works (In Plain English)</h4>
          <ol style="padding-left:20px;">
            <li><strong>Create many trees:</strong> Instead of one tree, we grow hundreds.</li>
            <li><strong>Give each tree different data:</strong> Each tree sees a random sample of houses (some houses might appear multiple times, some not at all).</li>
            <li><strong>Give each tree different features:</strong> At each split, the tree only considers a random subset of features.</li>
            <li><strong>Average them all:</strong> When predicting a new house, ask all trees, average their answers.</li>
          </ol>
          <p>This randomness ensures trees are different, so their errors cancel out.</p>
        </div>

        <div class="regression-container">
          <div class="regression-chart"><canvas id="rfChart"></canvas></div>

          <div class="regression-controls">
            <div class="control-group">
              <h4><i class="fas fa-sliders-h"></i> Random Forest Controls</h4>
              <div class="slider-container">
                <label><i class="fas fa-tree"></i> Number of Trees:</label>
                <input type="range" id="nEstimators" min="10" max="200" step="10" value="100">
                <span class="slider-value" id="nEstimatorsValue">100</span>
              </div>
              <p style="font-size:12px;">More trees = more stable (but slower)</p>
              
              <div class="slider-container">
                <label><i class="fas fa-layer-group"></i> Max Depth:</label>
                <input type="range" id="rfDepth" min="3" max="20" step="1" value="10">
                <span class="slider-value" id="rfDepthValue">10</span>
              </div>
              <p style="font-size:12px;">Deeper trees = more complex</p>
            </div>

            <div class="button-group">
              <button class="btn btn-primary" onclick="updateRandomForest()"><i class="fas fa-play"></i> Update Forest</button>
            </div>

            <div class="metrics-container" style="margin-top: 20px;">
              <div class="metric-card">
                <div class="metric-label">Train R¬≤</div>
                <div class="metric-value" id="rfTrainR2">0.95</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Test R¬≤</div>
                <div class="metric-value" id="rfTestR2">0.89</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">OOB Score</div>
                <div class="metric-value" id="rfOOB">0.87</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Trees</div>
                <div class="metric-value" id="rfTrees">100</div>
              </div>
            </div>

            <div class="explanation-box">
              <p><strong>üìö What's OOB Score?</strong> Out-of-bag (OOB) score is like free validation. Each tree is trained on ~2/3 of the data, leaving 1/3 out. Those "left out" houses test that tree. It gives you an honest estimate of how well your forest will perform on new data.</p>
            </div>
          </div>
        </div>

        <div class="code-editor-container" style="margin-top: 20px;">
          <div class="code-header">
            <div class="code-title"><i class="fab fa-python"></i> Random Forest in Python</div>
          </div>
          <div class="code-body">
            <pre class="code-block"><code><span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestRegressor

<span class="comment"># Create a random forest</span>
rf = RandomForestRegressor(
    <span class="function">n_estimators</span>=<span class="number">100</span>,      <span class="comment"># Number of trees in the forest</span>
    <span class="function">max_depth</span>=<span class="number">10</span>,          <span class="comment"># Limit tree depth</span>
    <span class="function">min_samples_leaf</span>=<span class="number">5</span>,     <span class="comment"># Each leaf needs at least 5 houses</span>
    <span class="function">oob_score</span>=<span class="keyword">True</span>,         <span class="comment"># Get free validation score</span>
    <span class="function">random_state</span>=<span class="number">42</span>
)

rf.<span class="function">fit</span>(X_train, y_train)

<span class="keyword">print</span>(<span class="string">f"OOB Score: {rf.oob_score_:.3f}"</span>)

<span class="comment"># See which features are most important</span>
importances = rf.feature_importances_
<span class="keyword">for</span> name, imp <span class="keyword">in</span> <span class="function">zip</span>(feature_names, importances):
    <span class="keyword">print</span>(<span class="string">f"{name}: {imp:.3f}"</span>)  <span class="comment"># Higher = more important</span></code></pre>
          </div>
        </div>
      </div>

      <div class="panel section">
        <h3><i class="fas fa-bolt"></i> 4.3 XGBoost: The Champion Algorithm</h3>

        <div class="info-box success">
          <h4><i class="fas fa-trophy"></i> Why XGBoost Wins Competitions</h4>
          <p>
            XGBoost (Extreme Gradient Boosting) is like a student who learns from mistakes. Each new tree focuses on the houses previous trees predicted poorly. With smart tricks to prevent overfitting, it often produces the most accurate predictions.
          </p>
        </div>

        <div class="common-pitfall">
          <p><strong>‚ö†Ô∏è Warning for Beginners:</strong> XGBoost is powerful but has many knobs to adjust. Start with default settings, then learn to tune one parameter at a time. And always use early stopping to prevent overfitting!</p>
        </div>

        <div class="code-editor-container" style="margin-top: 20px;">
          <div class="code-header">
            <div class="code-title"><i class="fab fa-python"></i> XGBoost Basic Example</div>
          </div>
          <div class="code-body">
            <pre class="code-block"><code><span class="comment"># Install: pip install xgboost</span>
<span class="keyword">import</span> xgboost <span class="keyword">as</span> xgb

<span class="comment"># Create the model</span>
xgb_model = xgb.XGBRegressor(
    <span class="function">n_estimators</span>=<span class="number">300</span>,      <span class="comment"># How many trees to try (max)</span>
    <span class="function">learning_rate</span>=<span class="number">0.05</span>,    <span class="comment">"> How much each tree contributes</span>
    <span class="function">max_depth</span>=<span class="number">5</span>,           <span class="comment"># Shallow trees prevent overfitting</span>
    <span class="function">random_state</span>=<span class="number">42</span>
)

<span class="comment"># Train with early stopping (stops when validation stops improving)</span>
xgb_model.<span class="function">fit</span>(
    X_train, y_train,
    <span class="function">eval_set</span>=[(X_test, y_test)],
    <span class="function">early_stopping_rounds</span>=<span class="number">20</span>,   <span class="comment"># Stop if no improvement for 20 rounds</span>
    <span class="function">verbose</span>=<span class="keyword">False</span>
)</code></pre>
          </div>
        </div>
      </div>
    </div>

    <!-- ================================================
         SECTION 5: EVALUATION - HOW TO MEASURE SUCCESS
    ================================================= -->
    <div id="evaluation" class="module-content">

      <div class="panel section">
        <h3><i class="fas fa-clipboard-check"></i> 5.1 How Do We Know If Our Predictions Are Good?</h3>

        <div class="info-box info">
          <h4><i class="fas fa-ruler"></i> Three Essential Metrics (with Simple Explanations)</h4>
        </div>

        <div class="expanded-content">
          <h4>üìè MAE: Mean Absolute Error</h4>
          <div class="formula-with-calc">
            <div class="formula-box">
              <div class="formula-label">Formula</div>
              <span class="math-equation">MAE = average(|actual - prediction|)</span>
            </div>
            <div class="numeric-example">
              <strong>Plain English:</strong> "On average, how far off are we?"<br/>
              <strong>Example:</strong> If MAE = $15,000 on house prices, that means typical predictions are off by about $15,000.
            </div>
          </div>

          <h4>üìê RMSE: Root Mean Squared Error</h4>
          <div class="formula-with-calc">
            <div class="formula-box">
              <div class="formula-label">Formula</div>
              <span class="math-equation">RMSE = sqrt(average((actual - prediction)¬≤))</span>
            </div>
            <div class="numeric-example">
              <strong>Plain English:</strong> "Similar to MAE, but gives extra penalty to big mistakes."<br/>
              <strong>Example:</strong> Being off by $50,000 once is worse than being off by $10,000 five times.
            </div>
          </div>

          <h4>üéØ R¬≤: R-Squared</h4>
          <div class="formula-with-calc">
            <div class="formula-box">
              <div class="formula-label">Formula</div>
              <span class="math-equation">R¬≤ = 1 - (model error / dumb guess error)</span>
            </div>
            <div class="numeric-example">
              <strong>Plain English:</strong> "How much better are we than just guessing the average?"<br/>
              <strong>Scale:</strong> 1 = perfect, 0 = no better than average, negative = worse than average
            </div>
          </div>
        </div>

        <h4>Let's Calculate Them Step by Step</h4>
        <table class="detailed-table">
          <thead>
            <tr><th>Actual Price</th><th>Our Prediction</th><th>Error (actual - pred)</th><th>Absolute Error</th><th>Squared Error</th></tr>
          </thead>
          <tbody>
            <tr><td>$250,000</td><td>$240,000</td><td>-$10,000</td><td>$10,000</td><td>100 million</td></tr>
            <tr><td>$450,000</td><td>$460,000</td><td>$10,000</td><td>$10,000</td><td>100 million</td></tr>
            <tr><td>$180,000</td><td>$190,000</td><td>$10,000</td><td>$10,000</td><td>100 million</td></tr>
            <tr><td>$320,000</td><td>$310,000</td><td>-$10,000</td><td>$10,000</td><td>100 million</td></tr>
          </tbody>
        </table>

        <div class="numeric-example">
          <p><strong>Step 1 - MAE:</strong> Average of absolute errors = ($10,000 √ó 4) / 4 = <strong>$10,000</strong></p>
          <p><strong>Step 2 - RMSE:</strong> Square root of average squared errors = ‚àö(100 million) = <strong>$10,000</strong> (same here because errors are equal)</p>
          <p><strong>Step 3 - R¬≤:</strong> Compare to guessing average ($300,000)<br/>
          Dumb guess errors: $50,000 + $150,000 + $120,000 + $20,000 squared...<br/>
          Our model is much better! R¬≤ ‚âà <strong>0.85</strong></p>
        </div>

        <div class="common-pitfall">
          <p><strong>‚ö†Ô∏è Common Mistake:</strong> Don't compare RMSE across different datasets. An RMSE of $10,000 might be great for predicting $500,000 houses but terrible for predicting $50,000 houses. Always consider the scale of your target!</p>
        </div>
      </div>

      <div class="panel section">
        <h3><i class="fas fa-chart-bar"></i> 5.2 Cross-Validation: Don't Get Lucky, Get Good</h3>

        <div class="info-box warning">
          <h4><i class="fas fa-exclamation-triangle"></i> The Problem with One Test</h4>
          <p>
            If you split your data once, you might get lucky (easy test set) or unlucky (hard test set). 
            Cross-validation solves this by testing on multiple different splits.
          </p>
        </div>

        <div class="explanation-box">
          <p><strong>üìö How 5-Fold Cross-Validation Works:</strong></p>
          <ol style="padding-left:20px;">
            <li>Split data into 5 equal parts</li>
            <li>Train on parts 1-4, test on part 5 ‚Üí record score</li>
            <li>Train on parts 1-3+5, test on part 4 ‚Üí record score</li>
            <li>Train on parts 1-2+4-5, test on part 3 ‚Üí record score</li>
            <li>Train on parts 1+3-5, test on part 2 ‚Üí record score</li>
            <li>Train on parts 2-5, test on part 1 ‚Üí record score</li>
            <li>Average all 5 scores ‚Üí your final, honest estimate</li>
          </ol>
        </div>

        <div class="code-editor-container">
          <div class="code-header">
            <div class="code-title">Cross-Validation in Python</div>
          </div>
          <div class="code-body">
            <pre class="code-block"><code><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> cross_val_score
<span class="keyword">from</span> sklearn.ensemble <span class="keyword">import</span> RandomForestRegressor

model = RandomForestRegressor()
scores = cross_val_score(model, X, y, <span class="function">cv</span>=<span class="number">5</span>, <span class="function">scoring</span>=<span class="string">'r2'</span>)

<span class="keyword">print</span>(<span class="string">f"Scores from each fold: {scores}"</span>)
<span class="keyword">print</span>(<span class="string">f"Average R¬≤: {scores.mean():.3f}"</span>)
<span class="keyword">print</span>(<span class="string">f"Stability (std): {scores.std():.3f}"</span>)  <span class="comment"># Lower = more stable</span></code></pre>
          </div>
        </div>

        <div class="pro-tip">
          <p><strong>üí° Reading the Results:</strong> If your scores are [0.85, 0.87, 0.84, 0.86, 0.85] ‚Üí stable, trustworthy. If they're [0.95, 0.60, 0.92, 0.55, 0.90] ‚Üí unstable, your model is inconsistent. Might need more data or simpler model.</p>
        </div>
      </div>

      <div class="panel section">
        <h3><i class="fas fa-shield-halved"></i> 5.3 The Trust Checklist: When Can You Deploy Your Model?</h3>

        <div class="info-box info">
          <h4><i class="fas fa-check-circle"></i> 7 Questions to Ask Before Trusting a Model</h4>
        </div>

        <div class="expanded-content">
          <ol style="padding-left:20px; line-height:2;">
            <li><strong>‚úÖ Test performance close to training?</strong> (If train=0.99, test=0.60 ‚Üí overfitting!)</li>
            <li><strong>‚úÖ Cross-validation scores stable?</strong> (Not jumping between 0.95 and 0.55)</li>
            <li><strong>‚úÖ No data leakage?</strong> (Did test data accidentally influence training?)</li>
            <li><strong>‚úÖ Errors acceptable?</strong> (Is being off by $15,000 okay for your use case?)</li>
            <li><strong>‚úÖ Passes sanity checks?</strong> (Does it predict larger houses cost more?)</li>
            <li><strong>‚úÖ Works on edge cases?</strong> (Very small, very large, unusual houses?)</li>
            <li><strong>‚úÖ Monitoring plan ready?</strong> (How will you know if it stops working?)</li>
          </ol>

          <div class="common-pitfall">
            <p><strong>‚ö†Ô∏è Real horror story:</strong> A hospital's model predicted pneumonia patients had lower risk of death if they had asthma. Why? Because asthma patients got rushed to ICU immediately, so they were monitored closely. The model learned "asthma = good" - but that's wrong! This is called <strong>data leakage</strong>. Always ask: "Does this prediction make sense?"</p>
          </div>
        </div>
      </div>
    </div>

    <!-- ================================================
         SECTION 6: HANDS-ON LAB - TRY IT YOURSELF!
    ================================================= -->
    <div id="hands-on" class="module-content">

      <div class="panel section">
        <h3><i class="fas fa-laptop-code"></i> 6.1 Compare All Algorithms on the Same Data</h3>

        <div class="info-box success">
          <h4><i class="fas fa-flask"></i> Your Mission</h4>
          <p>
            Below is the same dataset. Click different algorithms and see how they fit the data.
            Watch how some capture the curve better than others!
          </p>
        </div>

        <div class="regression-container">
          <div class="regression-chart"><canvas id="comparisonChart"></canvas></div>

          <div class="regression-controls">
            <div class="control-group">
              <h4><i class="fas fa-cogs"></i> Pick an Algorithm</h4>
              <div class="button-group" style="flex-direction: column; gap: 10px;">
                <button class="btn btn-secondary" onclick="compareAlgorithm('linear')" style="width: 100%; justify-content: flex-start;">
                  <i class="fas fa-chart-line"></i> Linear Regression (straight line)
                </button>
                <button class="btn btn-secondary" onclick="compareAlgorithm('tree')" style="width: 100%; justify-content: flex-start;">
                  <i class="fas fa-tree"></i> Decision Tree (step function)
                </button>
                <button class="btn btn-secondary" onclick="compareAlgorithm('rf')" style="width: 100%; justify-content: flex-start;">
                  <i class="fas fa-random"></i> Random Forest (smooth steps)
                </button>
                <button class="btn btn-secondary" onclick="compareAlgorithm('xgb')" style="width: 100%; justify-content: flex-start;">
                  <i class="fas fa-bolt"></i> XGBoost (flexible curve)
                </button>
              </div>
            </div>

            <div class="metrics-container" style="margin-top: 20px;">
              <div class="metric-card">
                <div class="metric-label">Algorithm</div>
                <div class="metric-value" id="currentAlgo">Linear</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Train R¬≤</div>
                <div class="metric-value" id="algoTrainR2">0.72</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">Test R¬≤</div>
                <div class="metric-value" id="algoTestR2">0.68</div>
              </div>
              <div class="metric-card">
                <div class="metric-label">RMSE</div>
                <div class="metric-value" id="algoRMSE">12.4</div>
              </div>
            </div>

            <div class="explanation-box">
              <p><strong>üëÜ Try each one:</strong></p>
              <ul style="padding-left:20px;">
                <li><strong>Linear:</strong> Can't capture the curve - underfitting</li>
                <li><strong>Tree:</strong> Captures steps, might be jagged</li>
                <li><strong>Random Forest:</strong> Smooths the steps, better fit</li>
                <li><strong>XGBoost:</strong> Flexible, often best test R¬≤</li>
              </ul>
            </div>
          </div>
        </div>

        <div class="algorithm-grid" style="margin-top: 30px;">
          <div class="algorithm-card" id="algoLinear">
            <div class="algorithm-header">
              <div class="algorithm-icon"><i class="fas fa-chart-line"></i></div>
              <div class="algorithm-title">
                <h4>Linear Regression</h4><p>Simple, explainable baseline</p>
              </div>
            </div>
            <div class="algorithm-body">
              <div class="algorithm-metric"><span>Best for:</span><span>Linear relationships</span></div>
              <div class="algorithm-metric"><span>Pros:</span><span>Fast, interpretable</span></div>
              <div class="algorithm-metric"><span>Cons:</span><span>Misses curves</span></div>
            </div>
          </div>

          <div class="algorithm-card" id="algoTree">
            <div class="algorithm-header">
              <div class="algorithm-icon"><i class="fas fa-tree"></i></div>
              <div class="algorithm-title">
                <h4>Decision Tree</h4><p>Rule-based, intuitive</p>
              </div>
            </div>
            <div class="algorithm-body">
              <div class="algorithm-metric"><span>Best for:</span><span>Clear thresholds</span></div>
              <div class="algorithm-metric"><span>Pros:</span><span>Easy to explain</span></div>
              <div class="algorithm-metric"><span>Cons:</span><span>Overfits easily</span></div>
            </div>
          </div>

          <div class="algorithm-card" id="algoRF">
            <div class="algorithm-header">
              <div class="algorithm-icon"><i class="fas fa-random"></i></div>
              <div class="algorithm-title">
                <h4>Random Forest</h4><p>Many trees = stable</p>
              </div>
            </div>
            <div class="algorithm-body">
              <div class="algorithm-metric"><span>Best for:</span><span>General tabular data</span></div>
              <div class="algorithm-metric"><span>Pros:</span><span>Robust, little tuning</span></div>
              <div class="algorithm-metric"><span>Cons:</span><span>Slower, less interpretable</span></div>
            </div>
          </div>

          <div class="algorithm-card" id="algoXGB">
            <div class="algorithm-header">
              <div class="algorithm-icon"><i class="fas fa-bolt"></i></div>
              <div class="algorithm-title">
                <h4>XGBoost</h4><p>State-of-the-art</p>
              </div>
            </div>
            <div class="algorithm-body">
              <div class="algorithm-metric"><span>Best for:</span><span>Maximum accuracy</span></div>
              <div class="algorithm-metric"><span>Pros:</span><span>Often wins competitions</span></div>
              <div class="algorithm-metric"><span>Cons:</span><span>More tuning needed</span></div>
            </div>
          </div>
        </div>

        <div class="pro-tip">
          <p><strong>üí° How to Choose:</strong> Start with Linear (baseline). If data looks curved, try Random Forest. If you need top performance and can tune carefully, try XGBoost. But if Linear is almost as good as XGBoost, pick Linear - it's simpler and easier to explain!</p>
        </div>
      </div>
    </div>

    <!-- ================================================
         SECTION 7: RESOURCES - KEEP LEARNING
    ================================================= -->
    <div id="resources" class="module-content">

      <div class="panel section">
        <h3><i class="fas fa-book"></i> 7.1 Where to Learn More</h3>

        <div class="concept-grid">
          <div class="concept-card">
            <h5><i class="fas fa-book-open"></i> Free Books</h5>
            <ul style="padding-left:20px;">
              <li><a href="https://www.statlearning.com/" target="_blank">Introduction to Statistical Learning</a> - Perfect for beginners</li>
              <li><a href="https://hastie.su.domains/ElemStatLearn/" target="_blank">Elements of Statistical Learning</a> - More advanced</li>
            </ul>
          </div>

          <div class="concept-card">
            <h5><i class="fas fa-graduation-cap"></i> Free Courses</h5>
            <ul style="padding-left:20px;">
              <li>Andrew Ng's Machine Learning (Coursera) - Classic</li>
              <li>Fast.ai Practical Deep Learning - Hands-on</li>
            </ul>
          </div>

          <div class="concept-card">
            <h5><i class="fas fa-database"></i> Practice Datasets</h5>
            <ul style="padding-left:20px;">
              <li><a href="https://www.kaggle.com/datasets" target="_blank">Kaggle Datasets</a> - Thousands of real datasets</li>
              <li><a href="https://archive.ics.uci.edu/ml/index.php" target="_blank">UCI Repository</a> - Classic benchmark data</li>
            </ul>
          </div>
        </div>
      </div>

      <div class="panel section">
        <h3><i class="fas fa-download"></i> 7.2 Download Practice Data</h3>

        <div class="info-box success">
          <p>Click to download small CSV files to practice with Python or Excel:</p>
          <div class="button-group">
            <button class="btn btn-primary" onclick="downloadDataset('housing_sample.csv')">
              <i class="fas fa-download"></i> housing_sample.csv
            </button>
            <button class="btn btn-secondary" onclick="downloadDataset('synthetic_regression.csv')">
              <i class="fas fa-download"></i> synthetic_regression.csv
            </button>
          </div>
        </div>

        <h4>Preview: housing_sample.csv</h4>
        <table class="detailed-table">
          <thead><tr><th>sqft</th><th>age</th><th>style</th><th>price</th></tr></thead>
          <tbody>
            <tr><td>1200</td><td>10</td><td>ranch</td><td>250000</td></tr>
            <tr><td>1800</td><td>5</td><td>colonial</td><td>450000</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <footer>
      <p>üìö Module 5: Supervised Machine Learning - Regression</p>
      <p>¬© 2026 | IAF 604 | Remember: All models are wrong, but some are useful!</p>
    </footer>
  </div>

  <script>
    /************************************************************
     * SAME JAVASCRIPT AS ORIGINAL - KEPT INTACT
     ************************************************************/
    let linearChart = null;
    let treeChart = null;
    let rfChart = null;
    let comparisonChart = null;
    let currentData = { X: [], y: [] };

    // Theme management
    const themeToggle = document.getElementById('themeToggle');
    const themeLabel = document.getElementById('themeLabel');
    const body = document.body;
    const THEME_KEY = 'iaf604-theme';

    function applyTheme(theme) {
      body.setAttribute('data-theme', theme);
      const isDay = theme === 'day';
      themeLabel.textContent = isDay ? 'Day Mode' : 'Night Mode';
      themeToggle.setAttribute('aria-label', `Theme: ${themeLabel.textContent} (click to toggle)`);
      updateChartColors();
    }

    function initTheme() {
      const savedTheme = localStorage.getItem(THEME_KEY);
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      if (savedTheme === 'day' || savedTheme === 'night') {
        applyTheme(savedTheme);
      } else {
        const defaultTheme = prefersDark ? 'night' : 'day';
        applyTheme(defaultTheme);
        localStorage.setItem(THEME_KEY, defaultTheme);
      }
    }

    function toggleTheme() {
      const current = body.getAttribute('data-theme');
      const next = current === 'night' ? 'day' : 'night';
      applyTheme(next);
      localStorage.setItem(THEME_KEY, next);
    }

    themeToggle.addEventListener('click', toggleTheme);

    // Module navigation
    function switchModule(moduleId) {
      document.querySelectorAll('.module-content').forEach(module => module.classList.remove('active'));
      document.querySelectorAll('.nav-btn').forEach(btn => btn.classList.remove('active'));

      document.getElementById(moduleId).classList.add('active');
      document.querySelector(`.nav-btn[data-module="${moduleId}"]`).classList.add('active');

      if (moduleId === 'linear-models') {
        setTimeout(() => { initLinearChart(); generateLinearData(); }, 100);
      } else if (moduleId === 'tree-models') {
        setTimeout(() => { initTreeChart(); generateTreeData(); }, 100);
      } else if (moduleId === 'ensemble') {
        setTimeout(() => { initRFChart(); generateRFData(); }, 100);
      } else if (moduleId === 'hands-on') {
        setTimeout(() => { initComparisonChart(); generateComparisonData(); }, 100);
      }
    }

    document.querySelectorAll('.nav-btn').forEach(btn => {
      btn.addEventListener('click', () => switchModule(btn.dataset.module));
    });

    // Chart colors
    function getChartColors() {
      const isDay = body.getAttribute('data-theme') === 'day';
      return {
        primary: isDay ? 'rgba(37, 99, 235, 0.8)' : 'rgba(96, 165, 250, 0.8)',
        secondary: isDay ? 'rgba(124, 58, 237, 0.8)' : 'rgba(167, 139, 250, 0.8)',
        success: isDay ? 'rgba(16, 185, 129, 0.8)' : 'rgba(52, 211, 153, 0.8)',
        danger: isDay ? 'rgba(239, 68, 68, 0.8)' : 'rgba(251, 113, 133, 0.8)',
        warning: isDay ? 'rgba(245, 158, 11, 0.8)' : 'rgba(251, 191, 36, 0.8)',
        grid: isDay ? 'rgba(148, 163, 184, 0.25)' : 'rgba(148, 163, 184, 0.14)',
        text: isDay ? '#0F172A' : '#EAF0FF',
        background: isDay ? '#FFFFFF' : '#0F172A'
      };
    }

    function updateChartColors() {
      const colors = getChartColors();
      [linearChart, treeChart, rfChart, comparisonChart].forEach(chart => {
        if (!chart) return;
        if (chart.options.scales) {
          if (chart.options.scales.x) {
            chart.options.scales.x.grid.color = colors.grid;
            chart.options.scales.x.ticks.color = colors.text;
            if (chart.options.scales.x.title) chart.options.scales.x.title.color = colors.text;
          }
          if (chart.options.scales.y) {
            chart.options.scales.y.grid.color = colors.grid;
            chart.options.scales.y.ticks.color = colors.text;
            if (chart.options.scales.y.title) chart.options.scales.y.title.color = colors.text;
          }
        }
        if (chart.options.plugins && chart.options.plugins.legend) {
          chart.options.plugins.legend.labels.color = colors.text;
        }
        chart.update();
      });
    }

    // Linear chart
    function initLinearChart() {
      const ctx = document.getElementById('linearChart');
      if (!ctx) return;
      const colors = getChartColors();
      if (linearChart) linearChart.destroy();
      linearChart = new Chart(ctx, {
        type: 'scatter',
        data: { datasets: [{
            label: 'Data Points',
            data: [],
            backgroundColor: colors.primary,
            pointRadius: 4
          }, {
            label: 'Regression Line',
            data: [],
            type: 'line',
            borderColor: colors.success,
            borderWidth: 3,
            pointRadius: 0,
            fill: false
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { labels: { color: colors.text } } },
          scales: {
            x: { title: { display: true, text: 'Feature X', color: colors.text }, grid: { color: colors.grid }, ticks: { color: colors.text } },
            y: { title: { display: true, text: 'Target y', color: colors.text }, grid: { color: colors.grid }, ticks: { color: colors.text } }
          }
        }
      });
    }

    function generateLinearData() {
      const noiseEl = document.getElementById('noiseLevel');
      const sampleEl = document.getElementById('sampleSize');
      if (!noiseEl || !sampleEl) return;

      const noiseLevel = parseFloat(noiseEl.value);
      const sampleSize = parseInt(sampleEl.value);

      document.getElementById('noiseLevelValue').textContent = noiseLevel;
      document.getElementById('sampleSizeValue').textContent = sampleSize;

      const trueSlope = 2.5;
      const trueIntercept = 10;

      const X = [];
      const y = [];

      for (let i = 0; i < sampleSize; i++) {
        const x = Math.random() * 20;
        const noise = (Math.random() - 0.5) * noiseLevel;
        const target = trueIntercept + trueSlope * x + noise;
        X.push(x);
        y.push(target);
      }

      const n = X.length;
      const sumX = X.reduce((a, b) => a + b, 0);
      const sumY = y.reduce((a, b) => a + b, 0);
      const sumXY = X.reduce((sum, xi, i) => sum + xi * y[i], 0);
      const sumX2 = X.reduce((sum, xi) => sum + xi * xi, 0);

      const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
      const intercept = (sumY - slope * sumX) / n;

      const yMean = sumY / n;
      const ssTot = y.reduce((sum, yi) => sum + (yi - yMean) ** 2, 0);
      const ssRes = y.reduce((sum, yi, i) => sum + (yi - (intercept + slope * X[i])) ** 2, 0);
      const r2 = 1 - ssRes / ssTot;
      const mse = ssRes / n;

      document.getElementById('trueSlope').textContent = trueSlope.toFixed(2);
      document.getElementById('estSlope').textContent = slope.toFixed(2);
      document.getElementById('lrR2').textContent = r2.toFixed(3);
      document.getElementById('lrMSE').textContent = mse.toFixed(2);

      if (linearChart) {
        linearChart.data.datasets[0].data = X.map((x, i) => ({ x, y: y[i] }));
        const minX = Math.min(...X);
        const maxX = Math.max(...X);
        linearChart.data.datasets[1].data = [
          { x: minX, y: intercept + slope * minX },
          { x: maxX, y: intercept + slope * maxX }
        ];
        linearChart.update();
      }
    }

    // Tree chart
    function initTreeChart() {
      const ctx = document.getElementById('treeChart');
      if (!ctx) return;
      const colors = getChartColors();
      if (treeChart) treeChart.destroy();
      treeChart = new Chart(ctx, {
        type: 'scatter',
        data: { datasets: [{
            label: 'Training Data',
            data: [],
            backgroundColor: colors.primary,
            pointRadius: 4
          }, {
            label: 'Tree Predictions',
            data: [],
            type: 'line',
            borderColor: colors.success,
            borderWidth: 3,
            pointRadius: 0,
            fill: false
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { labels: { color: colors.text } } },
          scales: {
            x: { title: { display: true, text: 'Feature X', color: colors.text }, grid: { color: colors.grid }, ticks: { color: colors.text } },
            y: { title: { display: true, text: 'Target y', color: colors.text }, grid: { color: colors.grid }, ticks: { color: colors.text } }
          }
        }
      });
    }

    function generateTreeData() {
      const X = [];
      const y = [];
      for (let i = 0; i < 100; i++) {
        const x = Math.random() * 20 - 10;
        const target = 5 + 2 * x + 0.5 * x * x + (Math.random() - 0.5) * 20;
        X.push(x);
        y.push(target);
      }
      currentData = { X, y };
      updateTreeModel();
    }

    function updateTreeModel() {
      const depthEl = document.getElementById('treeDepth');
      const minEl = document.getElementById('minSamples');
      if (!depthEl || !minEl) return;

      const depth = parseInt(depthEl.value);
      const minSamples = parseInt(minEl.value);

      document.getElementById('treeDepthValue').textContent = depth;
      document.getElementById('minSamplesValue').textContent = minSamples;
      document.getElementById('treeCurrentDepth').textContent = depth;

      const X = currentData.X || Array.from({ length: 100 }, () => Math.random() * 20 - 10);
      const y = currentData.y || X.map(x => 5 + 2 * x + 0.5 * x * x + (Math.random() - 0.5) * 20);

      const sortedIndices = X.map((_, i) => i).sort((a, b) => X[a] - X[b]);
      const sortedX = sortedIndices.map(i => X[i]);
      const sortedY = sortedIndices.map(i => y[i]);

      const treePred = [];
      const nSegments = depth + 2;
      const segmentSize = Math.max(1, Math.floor(sortedX.length / nSegments));

      for (let i = 0; i < sortedX.length; i++) {
        const segment = Math.floor(i / segmentSize);
        const segStart = segment * segmentSize;
        const segEnd = Math.min(sortedY.length, (segment + 1) * segmentSize);
        const segmentY = sortedY.slice(segStart, segEnd);
        const meanY = segmentY.reduce((a, b) => a + b, 0) / (segmentY.length || 1);
        treePred.push(meanY);
      }

      const yMean = y.reduce((a, b) => a + b, 0) / y.length;
      const ssTot = y.reduce((sum, yi) => sum + (yi - yMean) ** 2, 0);
      const ssRes = y.reduce((sum, yi, i) => sum + (yi - treePred[sortedIndices.indexOf(i)]) ** 2, 0);
      const trainR2 = 1 - ssRes / ssTot;
      const testR2 = Math.max(0, trainR2 - 0.07 - (depth * 0.02));
      const leaves = Math.pow(2, depth);

      document.getElementById('treeTrainR2').textContent = trainR2.toFixed(3);
      document.getElementById('treeTestR2').textContent = testR2.toFixed(3);
      document.getElementById('treeLeaves').textContent = leaves;

      if (treeChart) {
        treeChart.data.datasets[0].data = X.map((x, i) => ({ x, y: y[i] }));
        treeChart.data.datasets[1].data = sortedX.map((x, i) => ({ x, y: treePred[i] }));
        treeChart.update();
      }
    }

    function resetTreeData() { generateTreeData(); }

    // Random Forest chart
    function initRFChart() {
      const ctx = document.getElementById('rfChart');
      if (!ctx) return;
      const colors = getChartColors();
      if (rfChart) rfChart.destroy();
      rfChart = new Chart(ctx, {
        type: 'scatter',
        data: { datasets: [{
            label: 'Data Points',
            data: [],
            backgroundColor: colors.primary,
            pointRadius: 3
          }, {
            label: 'Random Forest (Smoothed)',
            data: [],
            type: 'line',
            borderColor: colors.success,
            borderWidth: 3,
            pointRadius: 0,
            fill: false
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { labels: { color: colors.text } } },
          scales: {
            x: { title: { display: true, text: 'Feature X', color: colors.text }, grid: { color: colors.grid }, ticks: { color: colors.text } },
            y: { title: { display: true, text: 'Target y', color: colors.text }, grid: { color: colors.grid }, ticks: { color: colors.text } }
          }
        }
      });
    }

    function generateRFData() {
      const nEl = document.getElementById('nEstimators');
      const dEl = document.getElementById('rfDepth');
      if (!nEl || !dEl) return;

      const nEstimators = parseInt(nEl.value);
      const depth = parseInt(dEl.value);

      document.getElementById('nEstimatorsValue').textContent = nEstimators;
      document.getElementById('rfDepthValue').textContent = depth;
      document.getElementById('rfTrees').textContent = nEstimators;

      const X = [];
      const y = [];
      for (let i = 0; i < 150; i++) {
        const x = Math.random() * 20 - 10;
        const target = 3 + 1.5 * x + 0.3 * x * x - 0.1 * x * x * x + (Math.random() - 0.5) * 15;
        X.push(x);
        y.push(target);
      }

      const sortedIndices = X.map((_, i) => i).sort((a, b) => X[a] - X[b]);
      const sortedX = sortedIndices.map(i => X[i]);
      const sortedY = sortedIndices.map(i => y[i]);

      const rfPred = [];
      const windowSize = Math.max(5, Math.floor(30 / Math.sqrt(nEstimators / 50)));

      for (let i = 0; i < sortedX.length; i++) {
        const start = Math.max(0, i - windowSize);
        const end = Math.min(sortedX.length, i + windowSize + 1);
        const windowY = sortedY.slice(start, end);
        const meanY = windowY.reduce((a, b) => a + b, 0) / (windowY.length || 1);
        rfPred.push(meanY);
      }

      const yMean = y.reduce((a, b) => a + b, 0) / y.length;
      const ssTot = y.reduce((sum, yi) => sum + (yi - yMean) ** 2, 0);
      const ssResTrain = y.reduce((sum, yi, i) => {
        const idxInSorted = sortedIndices.indexOf(i);
        return sum + (yi - rfPred[idxInSorted]) ** 2;
      }, 0);

      const trainR2 = 1 - ssResTrain / ssTot;
      const testR2 = Math.min(0.95, trainR2 - 0.05 - (depth * 0.005));
      const oobScore = testR2 - 0.02;

      document.getElementById('rfTrainR2').textContent = trainR2.toFixed(3);
      document.getElementById('rfTestR2').textContent = testR2.toFixed(3);
      document.getElementById('rfOOB').textContent = oobScore.toFixed(3);

      if (rfChart) {
        rfChart.data.datasets[0].data = X.map((x, i) => ({ x, y: y[i] }));
        rfChart.data.datasets[1].data = sortedX.map((x, i) => ({ x, y: rfPred[i] }));
        rfChart.update();
      }
    }

    function updateRandomForest() { generateRFData(); }

    // Comparison chart
    function initComparisonChart() {
      const ctx = document.getElementById('comparisonChart');
      if (!ctx) return;
      const colors = getChartColors();
      if (comparisonChart) comparisonChart.destroy();
      comparisonChart = new Chart(ctx, {
        type: 'scatter',
        data: { datasets: [{
            label: 'Data',
            data: [],
            backgroundColor: colors.primary,
            pointRadius: 3
          }, {
            label: 'Model',
            data: [],
            type: 'line',
            borderColor: colors.success,
            borderWidth: 3,
            pointRadius: 0,
            fill: false
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: { legend: { labels: { color: colors.text } } },
          scales: {
            x: { title: { display: true, text: 'Feature X', color: colors.text }, grid: { color: colors.grid }, ticks: { color: colors.text } },
            y: { title: { display: true, text: 'Target y', color: colors.text }, grid: { color: colors.grid }, ticks: { color: colors.text } }
          }
        }
      });
    }

    function generateComparisonData() {
      const X = [];
      const y = [];
      for (let i = 0; i < 100; i++) {
        const x = Math.random() * 20 - 10;
        const target = 5 + 2 * x + 0.4 * x * x + (Math.random() - 0.5) * 10;
        X.push(x);
        y.push(target);
      }
      currentData = { X, y };
      if (comparisonChart) {
        comparisonChart.data.datasets[0].data = X.map((x, i) => ({ x, y: y[i] }));
        comparisonChart.update();
      }
      compareAlgorithm('linear');
    }

    function compareAlgorithm(algo) {
      const X = currentData.X || Array.from({ length: 100 }, () => Math.random() * 20 - 10);
      const y = currentData.y || X.map(x => 5 + 2 * x + 0.4 * x * x + (Math.random() - 0.5) * 10);

      const sortedIndices = X.map((_, i) => i).sort((a, b) => X[a] - X[b]);
      const sortedX = sortedIndices.map(i => X[i]);

      let predictions = [];
      let trainR2 = 0, testR2 = 0, rmse = 0;
      let algoName = '';

      switch(algo) {
        case 'linear':
          algoName = 'Linear';
          const n = X.length;
          const sumX = X.reduce((a, b) => a + b, 0);
          const sumY = y.reduce((a, b) => a + b, 0);
          const sumXY = X.reduce((sum, xi, i) => sum + xi * y[i], 0);
          const sumX2 = X.reduce((sum, xi) => sum + xi * xi, 0);
          const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);
          const intercept = (sumY - slope * sumX) / n;
          predictions = sortedX.map(x => intercept + slope * x);
          const yMean = sumY / n;
          const ssTot = y.reduce((sum, yi) => sum + (yi - yMean) ** 2, 0);
          const ssRes = y.reduce((sum, yi, i) => sum + (yi - (intercept + slope * X[i])) ** 2, 0);
          trainR2 = 1 - ssRes / ssTot;
          testR2 = trainR2 - 0.04;
          rmse = Math.sqrt(ssRes / n);
          break;
        case 'tree':
          algoName = 'Decision Tree';
          const treePred = [];
          for (let i = 0; i < sortedX.length; i++) {
            const x = sortedX[i];
            if (x < -3) treePred.push(10);
            else if (x < 0) treePred.push(15);
            else if (x < 3) treePred.push(22);
            else if (x < 6) treePred.push(28);
            else treePred.push(35);
          }
          predictions = treePred;
          trainR2 = 0.78; testR2 = 0.72; rmse = 7.8;
          break;
        case 'rf':
          algoName = 'Random Forest';
          predictions = sortedX.map(x => 12 + 3.5 * x - 0.1 * x * x);
          trainR2 = 0.89; testR2 = 0.85; rmse = 6.2;
          break;
        case 'xgb':
          algoName = 'XGBoost';
          predictions = sortedX.map(x => 10 + 3.8 * x - 0.15 * x * x + 0.2 * Math.sin(x));
          trainR2 = 0.92; testR2 = 0.88; rmse = 5.4;
          break;
      }

      document.getElementById('currentAlgo').textContent = algoName;
      document.getElementById('algoTrainR2').textContent = trainR2.toFixed(2);
      document.getElementById('algoTestR2').textContent = testR2.toFixed(2);
      document.getElementById('algoRMSE').textContent = rmse.toFixed(1);

      if (comparisonChart) {
        comparisonChart.data.datasets[1].data = sortedX.map((x, i) => ({ x, y: predictions[i] }));
        comparisonChart.update();
      }
    }

    // Dataset downloads
    const DATASETS = {
      "housing_sample.csv": `sqft,age,style,price
1200,10,ranch,250000
1800,5,colonial,450000
950,20,bungalow,180000
1600,8,townhome,360000
2100,4,colonial,520000
1400,12,ranch,295000
1750,7,modern,410000
1100,18,bungalow,215000
`,
      "synthetic_regression.csv": `x,y
-6.2,22.1
-1.5,9.8
3.0,18.4
7.4,35.2
-4.1,16.6
1.2,11.9
5.8,28.7
-0.8,8.9
`
    };

    function downloadDataset(filename) {
      const content = DATASETS[filename];
      if (!content) return;
      const blob = new Blob([content], { type: 'text/csv;charset=utf-8;' });
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url;
      a.download = filename;
      document.body.appendChild(a);
      a.click();
      document.body.removeChild(a);
      URL.revokeObjectURL(url);
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', () => {
      initTheme();

      ['noiseLevel', 'sampleSize'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.addEventListener('input', generateLinearData);
      });
      ['treeDepth', 'minSamples'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.addEventListener('input', updateTreeModel);
      });
      ['nEstimators', 'rfDepth'].forEach(id => {
        const el = document.getElementById(id);
        if (el) el.addEventListener('input', generateRFData);
      });

      setTimeout(() => {
        initLinearChart();
        generateLinearData();
      }, 200);

      if (window.MathJax) MathJax.typesetPromise();
    });

    window.switchModule = switchModule;
    window.generateLinearData = generateLinearData;
    window.updateTreeModel = updateTreeModel;
    window.resetTreeData = resetTreeData;
    window.updateRandomForest = updateRandomForest;
    window.compareAlgorithm = compareAlgorithm;
    window.generateComparisonData = generateComparisonData;
    window.downloadDataset = downloadDataset;
  </script>
</body>
</html>
